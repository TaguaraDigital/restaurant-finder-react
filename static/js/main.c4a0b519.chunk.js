(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(2),a=n.n(c),s=n(22),i=n.n(s),o=(n(31),n(12)),u=n(4),l=n(25),j=n(7),d=Object(c.createContext)(),b=function(e){var t=e.children,n=Object(c.useState)([]),a=Object(j.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(null),u=Object(j.a)(o,2),b=u[0],p=u[1],h={restaurants:s,setRestaurants:i,addRestaurants:function(e){i([].concat(Object(l.a)(s),[e]))},selectedRestaurant:b,setSelectedRestaurant:p};return Object(r.jsx)(d.Provider,{value:h,children:t})},p=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("h1",{className:"font-weight-light display-1 text-center",children:"Restaurant Finder"})})},h=n(3),x=n.n(h),O=n(5),m={},f="https://ywf-backend-restaurant-finder.herokuapp.com/api/v1/restaurants/";m.all=Object(O.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f);case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),m.byId=function(){var e=Object(O.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.add=function(){var e=Object(O.a)(x.a.mark((function e(t){var n,r,c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.location,c=t.price_range,e.next=3,fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,location:r,price_range:c})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.delete=function(){var e=Object(O.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f+t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.update=function(){var e=Object(O.a)(x.a.mark((function e(t){var n,r,c,a,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.name,c=t.location,a=t.price_range,e.next=3,fetch(f+n,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,location:c,price_range:a})});case 3:return s=e.sent,e.next=6,s.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.addReview=function(){var e=Object(O.a)(x.a.mark((function e(t,n,r,c){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f+t+"/review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,review:r,rating:c})});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}();var v=m,g=function(){var e=Object(c.useContext)(d).addRestaurants,t=Object(c.useState)(""),n=Object(j.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),u=o[0],l=o[1],b=Object(c.useState)("Price Range"),p=Object(j.a)(b,2),h=p[0],m=p[1],f=function(){var t=Object(O.a)(x.a.mark((function t(n){var r,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,v.add({name:a,location:u,price_range:h});case 4:r=t.sent,c={id:r.data.insertId,name:a,location:u,price_range:h},e(c),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"mb-4",children:Object(r.jsx)("form",{className:"form",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col",children:Object(r.jsx)("input",{value:a,onChange:function(e){return s(e.target.value)},type:"text",className:"form-control",placeholder:"name"})}),Object(r.jsx)("div",{className:"col",children:Object(r.jsx)("input",{value:u,onChange:function(e){return l(e.target.value)},className:"form-control",type:"text",placeholder:"location"})}),Object(r.jsx)("div",{className:"col",children:Object(r.jsxs)("select",{value:h,onChange:function(e){return m(e.target.value)},className:"custom-select my-1 mr-sm-2",children:[Object(r.jsx)("option",{disabled:!0,children:"Price Range"}),Object(r.jsx)("option",{value:"1",children:"$"}),Object(r.jsx)("option",{value:"2",children:"$$"}),Object(r.jsx)("option",{value:"3",children:"$$$"}),Object(r.jsx)("option",{value:"4",children:"$$$$"}),Object(r.jsx)("option",{value:"5",children:"$$$$$"})]})}),Object(r.jsx)("button",{onClick:f,type:"submit",className:"col btn btn-primary",children:"Add"})]})})})},w=n(18),N=n(23),y=function(e){for(var t=e.rating,n=[],c=1;c<=5;c++)c<=t?n.push(Object(r.jsx)(w.a,{className:"text-warning"},c)):c!==Math.ceil(t)||Number.isInteger(t)?n.push(Object(r.jsx)(N.a,{className:"text-warning"},c)):n.push(Object(r.jsx)(w.b,{className:"text-warning"},c));return Object(r.jsx)(r.Fragment,{children:n})},$=function(e){var t=Object(c.useContext)(d),n=t.restaurants,a=t.setRestaurants,s=Object(u.g)();Object(c.useEffect)((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.all();case 3:t=e.sent,a(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var i=function(){var e=Object(O.a)(x.a.mark((function e(t,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.prev=1,e.next=4,v.delete(r);case 4:e.sent,a(n.filter((function(e){return e.id!==r}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),o=function(e){return e.count?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(y,{rating:e.average_rating}),Object(r.jsxs)("span",{className:"text-warning ml-1",children:["(",e.count,")"]})]}):Object(r.jsx)("span",{className:"text-warning",children:"0 reviews"})};return Object(r.jsx)("div",{className:"list-group",children:Object(r.jsxs)("table",{className:"table table-hover table-dark",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{className:"bg-primary",children:[Object(r.jsx)("th",{scope:"col",children:"Restaurant"}),Object(r.jsx)("th",{scope:"col",children:"Location"}),Object(r.jsx)("th",{scope:"col",children:"Price Range"}),Object(r.jsx)("th",{scope:"col",children:"Ratings"}),Object(r.jsx)("th",{scope:"col",children:"Edit"}),Object(r.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(r.jsx)("tbody",{children:n&&n.map((function(e){return Object(r.jsxs)("tr",{onClick:function(){return t=e.id,void s.push("/restaurants/".concat(t));var t},children:[Object(r.jsx)("td",{children:e.name}),Object(r.jsx)("td",{children:e.location}),Object(r.jsx)("td",{children:"$".repeat(e.price_range)}),Object(r.jsx)("td",{children:o(e)}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{onClick:function(t){return function(e,t){e.stopPropagation(),s.push("/restaurants/".concat(t,"/update"))}(t,e.id)},className:"btn btn-warning",children:"Update"})}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{onClick:function(t){return i(t,e.id)},className:"btn btn-danger",children:"Delete"})})]},e.id)}))})]})})},k=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(p,{}),Object(r.jsx)(g,{}),Object(r.jsx)($,{})]})},C=function(e){var t=e.reviews;return Object(r.jsx)("div",{className:"row row-cols-3 mb-2",children:t.map((function(e){return Object(r.jsxs)("div",{className:"card text-white bg-primary m-2",style:{maxWidth:"30%"},children:[Object(r.jsxs)("div",{className:"card-header d-flex justify-content-between",children:[Object(r.jsx)("span",{children:e.name}),Object(r.jsx)("span",{children:Object(r.jsx)(y,{rating:e.rating})})]}),Object(r.jsx)("div",{className:"card-body",children:Object(r.jsx)("p",{className:"card-text",children:e.review})})]},e.id)}))})},R=function(){var e=Object(u.h)().id,t=Object(u.g)(),n=Object(c.useState)(""),a=Object(j.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(""),l=Object(j.a)(o,2),d=l[0],b=l[1],p=Object(c.useState)("Rating"),h=Object(j.a)(p,2),m=h[0],f=h[1],g=function(){var n=Object(O.a)(x.a.mark((function n(r){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,v.addReview(e,s,d,m);case 4:n.sent,t.go(0),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"mb-2",children:Object(r.jsxs)("form",{action:"",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("div",{className:"form-group col-8",children:[Object(r.jsx)("label",{htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{value:s,onChange:function(e){return i(e.target.value)},id:"name",placeholder:"name",type:"text",className:"form-control"})]}),Object(r.jsxs)("div",{className:"form-group col-4",children:[Object(r.jsx)("label",{htmlFor:"rating",children:"Rating"}),Object(r.jsxs)("select",{value:m,onChange:function(e){return f(e.target.value)},id:"rating",className:"form-control custom-select",children:[Object(r.jsx)("option",{disabled:!0,children:"Rating"}),Object(r.jsx)("option",{value:"1",children:"1"}),Object(r.jsx)("option",{value:"2",children:"2"}),Object(r.jsx)("option",{value:"3",children:"3"}),Object(r.jsx)("option",{value:"4",children:"4"}),Object(r.jsx)("option",{value:"5",children:"5"})]})]})]}),Object(r.jsxs)("div",{className:"form-group mt-2 mb-2",children:[Object(r.jsx)("label",{htmlFor:"Review",children:"Review"}),Object(r.jsx)("textarea",{value:d,onChange:function(e){return b(e.target.value)},id:"Review",className:"form-control"})]}),Object(r.jsx)("button",{type:"submit",onClick:g,className:"btn btn-primary mt-2",children:"Submit"})]})})},S=function(){var e=Object(u.h)().id,t=Object(c.useContext)(d),n=t.selectedRestaurant,a=t.setSelectedRestaurant;return Object(c.useEffect)((function(){(function(){var t=Object(O.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.byId(e);case 2:n=t.sent,a(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(r.jsx)("div",{children:n&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:"text-center display-1",children:n.restaurant[0].name}),Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)(y,{rating:n.restaurant[0].average_rating}),Object(r.jsx)("span",{className:"text-warning ml-1",children:n.restaurant[0].count?"(".concat(n.restaurant[0].count,")"):"(0)"})]}),Object(r.jsx)("div",{className:"mt-3",children:Object(r.jsx)(C,{reviews:n.reviews})}),Object(r.jsx)(R,{restId:e})]})})},F=function(e){var t=Object(u.h)().id,n=Object(u.g)(),a=(Object(c.useContext)(d).restaurants,Object(c.useState)("")),s=Object(j.a)(a,2),i=s[0],o=s[1],l=Object(c.useState)(""),b=Object(j.a)(l,2),p=b[0],h=b[1],m=Object(c.useState)(""),f=Object(j.a)(m,2),g=f[0],w=f[1];Object(c.useEffect)((function(){(function(){var e=Object(O.a)(x.a.mark((function e(){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.byId(t);case 2:n=e.sent,o(n.data.restaurant[0].name),h(n.data.restaurant[0].location),w(n.data.restaurant[0].price_range);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var N=function(){var e=Object(O.a)(x.a.mark((function e(r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,v.update({id:t,name:i,location:p,price_range:g});case 3:e.sent,n.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{action:"",children:[Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{value:i,onChange:function(e){return o(e.target.value)},id:"name",className:"form-control",type:"text"})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"location",children:"Location"}),Object(r.jsx)("input",{value:p,onChange:function(e){return h(e.target.value)},id:"location",className:"form-control",type:"text"})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:"price_range",children:"Price Range"}),Object(r.jsxs)("select",{value:g,onChange:function(e){return w(e.target.value)},className:"form-control",children:[Object(r.jsx)("option",{disabled:!0,children:"Price Range"}),Object(r.jsx)("option",{value:"1",children:"$"}),Object(r.jsx)("option",{value:"2",children:"$$"}),Object(r.jsx)("option",{value:"3",children:"$$$"}),Object(r.jsx)("option",{value:"4",children:"$$$$"}),Object(r.jsx)("option",{value:"5",children:"$$$$$"})]})]}),Object(r.jsx)("button",{type:"submit",onClick:N,className:"my-3 btn btn-primary",children:"Submit"})]})})},P=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{className:"text-center",children:"Update Restaurant"}),Object(r.jsx)(F,{})]})},_=function(){return Object(r.jsx)(b,{children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("h1",{children:"jodido esta app"}),Object(r.jsx)(o.a,{children:Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{exact:!0,path:"/",component:k}),Object(r.jsx)(u.b,{exact:!0,path:"/restaurants/:id/update",component:P}),Object(r.jsx)(u.b,{exact:!0,path:"/restaurants/:id",component:S}),Object(r.jsx)(u.b,{path:"/*",children:Object(r.jsx)(u.a,{to:"/"})})]})})]})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(_,{})}),document.getElementById("root")),T()}},[[38,1,2]]]);
//# sourceMappingURL=main.c4a0b519.chunk.js.map