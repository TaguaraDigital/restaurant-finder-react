(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(2),a=n.n(c),s=n(22),i=n.n(s),o=(n(31),n(12)),u=n(4),l=n(25),j=n(7),d=Object(c.createContext)(),p=function(e){var t=e.children,n=Object(c.useState)([]),a=Object(j.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(null),u=Object(j.a)(o,2),p=u[0],b=u[1],h={restaurants:s,setRestaurants:i,addRestaurants:function(e){i([].concat(Object(l.a)(s),[e]))},selectedRestaurant:p,setSelectedRestaurant:b};return Object(r.jsx)(d.Provider,{value:h,children:t})},b=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("h1",{className:"font-weight-light display-1 text-center",children:"Restaurant Finder"})})},h=n(3),x=n.n(h),f=n(5),O={},v="https://ywf-backend-restaurant-finder.herokuapp.com/api/v1/restaurants/";O.all=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v);case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),O.byId=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O.add=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.location,c=t.price_range,e.next=3,fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,location:r,price_range:c})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O.delete=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O.update=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r,c,a,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.name,c=t.location,a=t.price_range,e.next=3,fetch(v+n,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,location:c,price_range:a})});case 3:return s=e.sent,e.next=6,s.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O.addReview=function(){var e=Object(f.a)(x.a.mark((function e(t,n,r,c){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+t+"/review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,review:r,rating:c})});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,c){return e.apply(this,arguments)}}();var m=O,g=function(){var e=Object(c.useContext)(d).addRestaurants,t=Object(c.useState)(""),n=Object(j.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),o=Object(j.a)(i,2),u=o[0],l=o[1],p=Object(c.useState)("Price Range"),b=Object(j.a)(p,2),h=b[0],O=b[1],v=function(){var t=Object(f.a)(x.a.mark((function t(n){var r,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,m.add({name:a,location:u,price_range:h});case 4:r=t.sent,c={id:r.data.insertId,name:a,location:u,price_range:h},e(c),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"mb-4",children:Object(r.jsx)("form",{className:"form",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col",children:Object(r.jsx)("input",{value:a,onChange:function(e){return s(e.target.value)},type:"text",className:"form-control",placeholder:"name"})}),Object(r.jsx)("div",{className:"col",children:Object(r.jsx)("input",{value:u,onChange:function(e){return l(e.target.value)},className:"form-control",type:"text",placeholder:"location"})}),Object(r.jsx)("div",{className:"col",children:Object(r.jsxs)("select",{value:h,onChange:function(e){return O(e.target.value)},className:"custom-select my-1 mr-sm-2",children:[Object(r.jsx)("option",{disabled:!0,children:"Price Range"}),Object(r.jsx)("option",{value:"1",children:"$"}),Object(r.jsx)("option",{value:"2",children:"$$"}),Object(r.jsx)("option",{value:"3",children:"$$$"}),Object(r.jsx)("option",{value:"4",children:"$$$$"}),Object(r.jsx)("option",{value:"5",children:"$$$$$"})]})}),Object(r.jsx)("button",{onClick:v,type:"submit",className:"col btn btn-primary",children:"Add"})]})})})},w=n(18),y=n(23),N=function(e){for(var t=e.rating,n=[],c=1;c<=5;c++)c<=t?n.push(Object(r.jsx)(w.a,{className:"text-warning"},c)):c!==Math.ceil(t)||Number.isInteger(t)?n.push(Object(r.jsx)(y.a,{className:"text-warning"},c)):n.push(Object(r.jsx)(w.b,{className:"text-warning"},c));return Object(r.jsx)(r.Fragment,{children:n})},k=function(e){var t=Object(c.useContext)(d),n=t.restaurants,a=t.setRestaurants,s=Object(u.f)();Object(c.useEffect)((function(){(function(){var e=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.all();case 3:t=e.sent,a(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var i=function(){var e=Object(f.a)(x.a.mark((function e(t,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.prev=1,e.next=4,m.delete(r);case 4:e.sent,a(n.filter((function(e){return e.id!==r}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),o=function(e){return e.count?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(N,{rating:e.average_rating}),Object(r.jsxs)("span",{className:"text-warning ml-1",children:["(",e.count,")"]})]}):Object(r.jsx)("span",{className:"text-warning",children:"0 reviews"})};return Object(r.jsx)("div",{className:"list-group",children:Object(r.jsxs)("table",{className:"table table-hover table-dark",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{className:"bg-primary",children:[Object(r.jsx)("th",{scope:"col",children:"Restaurant"}),Object(r.jsx)("th",{scope:"col",children:"Location"}),Object(r.jsx)("th",{scope:"col",children:"Price Range"}),Object(r.jsx)("th",{scope:"col",children:"Ratings"}),Object(r.jsx)("th",{scope:"col",children:"Edit"}),Object(r.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(r.jsx)("tbody",{children:n&&n.map((function(e){return Object(r.jsxs)("tr",{onClick:function(){return t=e.id,void s.push("/restaurants/".concat(t));var t},children:[Object(r.jsx)("td",{children:e.name}),Object(r.jsx)("td",{children:e.location}),Object(r.jsx)("td",{children:"$".repeat(e.price_range)}),Object(r.jsx)("td",{children:o(e)}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{onClick:function(t){return function(e,t){e.stopPropagation(),s.push("/restaurants/".concat(t,"/update"))}(t,e.id)},className:"btn btn-warning",children:"Update"})}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{onClick:function(t){return i(t,e.id)},className:"btn btn-danger",children:"Delete"})})]},e.id)}))})]})})},C=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(b,{}),Object(r.jsx)(g,{}),Object(r.jsx)(k,{})]})},$=function(){return Object(r.jsx)(p,{children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)(o.a,{children:Object(r.jsx)(u.c,{children:Object(r.jsx)(u.a,{exact:!0,path:"/",component:C})})})})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)($,{})}),document.getElementById("root")),S()}},[[38,1,2]]]);
//# sourceMappingURL=main.c44518fd.chunk.js.map